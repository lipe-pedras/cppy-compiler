# CP-Py Compiler

This project implements a compiler for a simple C-like programming language named **cppy**, with additional Python-inspired features. The compiler is developed in Python using the PLY library.

## Language Features

The **cppy** language supports:
-   Variable assignment (`=`).
-   Optional type declarations (`int`, `float`, `string`, `char`, `bool`).
-   Arithmetic operators: `+`, `-`, `*`, `/`, `^` (power).
-   Relational operators: `==`, `!=`, `<`, `<=`, `>`, `>=`.
-   Logical operators: `and`, `or`, `not`.
-   Conditional statements: `if`, `elif`, `else`.
-   Looping statements: `while`.
-   I/O Commands: `print()` for output and `read()` for input.
-   Single-line comments: `//`.
-   Semicolon-terminated statements: `;`.

## Project Structure

-   `lexer.py`: Contains the source code for the lexical analyzer.
-   `parser.py`: Contains the source code for the syntax analyzer and the Python code generator.
-   `compiler.py`: The main script to run the compiler.
-   `*.cppy`: Source code files written in the cppy language.
-   `*.py`: Python files generated by the compiler.
-   `*_tokens.txt`: Files containing the list of recognized tokens for each example.

## Prerequisites

To run the compiler, you need Python 3 and the PLY library installed.

```bash
pip install ply
```

## How to Use the Compiler

The process involves two main stages: "compiling" your `.cppy` file, which translates it and generates a token report, and then executing the translated Python file.

### Compilation

To compile a program, use the `compiler.py` script from your terminal, passing the name of your source file as an argument. The compiler performs two main actions as required by the project specification: it translates the source code into Python and generates a file that recognizes every token in the program.

**Command:**
```bash
python compiler.py your_program.cppy
```
For example, if you have a file named `test.cppy`, you would run:
```bash
python compiler.py test.cppy
```

### Generated Outputs

After running the command above, two new files will be created in your directory:

1.  **`your_program_tokens.txt`**: This file contains a list of all the tokens identified by the lexical analyzer in your source code. Each line shows a token and its classification (identifier, reserved word, operator, etc.), as specified in the assignment requirements.

2.  **`your_program.py`**: This is the executable output of the compilation. It contains your original cppy logic translated into Python code, ready to be executed by the Python interpreter.

### Execution

To run your compiled program, you execute the generated `.py` file using Python. The program's output will be displayed in the terminal.

**Command:**
```bash
python your_program.py
```
Continuing the example, to run the compiled `test.cppy` file, you would use:
```bash
python test.py
```

## Example Programs

The repository includes three sample programs to demonstrate the language's syntax and its new interactive features.

### `example1.cppy`: Interactive Calculator

This program simulates a basic calculator that now reads the desired operation and two numbers directly from the user. It showcases interactive input, type casting (for numbers), and conditional logic.

```cppy
// example1.cppy
string operation;
float a;
float b;
float result = 0.0;
bool error = false;

print("--- CP-Py Interactive Calculator ---\n");
print("Enter operation (add, subtract, multiply, divide, power):\n");
read(operation);
print("Enter two numbers:\n");
read(a, b);
print("------------------------------------\n");

if (operation == "add") {
    result = a + b;
} elif (operation == "subtract") {
    result = a - b;
} elif (operation == "multiply") {
    result = a * b;
} elif (operation == "divide") {
    if (b == 0) {
        print("Error: Division by zero is not allowed.\n");
        error = true;
    } else {
        result = a / b;
    }
} elif (operation == "power") {
    result = a ^ b;
} else {
    print("Error: Unknown operation selected.\n");
    error = true;
}

if (not error) {
    print("Result: ");
    print(result);
    print("\n");
}
```

### `example2.cppy`: Interactive Student Grade System

This example prompts the user to enter a student's name, scores, and class attendance, then calculates their final grade and status. It's a good demonstration of reading multiple data types and applying complex logical rules.

```cppy
// example2.cppy
string student_name;
float test1_score;
float test2_score;
float assignment_score;
int classes_attended;

int total_classes = 50;
float min_attendance_rate = 75.0;

print("--- Student Grade System ---\n");
print("Enter student name:\n");
read(student_name);
print("Enter the scores for Test 1, Test 2, and Assignments:\n");
read(test1_score, test2_score, assignment_score);
print("Enter the number of classes attended:\n");
read(classes_attended);
print("----------------------------\n");

float final_grade = (test1_score * 0.4) + (test2_score * 0.4) + (assignment_score * 0.2);
float attendance_rate = (classes_attended * 100) / total_classes;

print("Final Grade: ");
print(final_grade);
print("\nAttendance Rate (%): ");
print(attendance_rate);
print("\n----------------------------\n");
print("Status: ");

if (attendance_rate < min_attendance_rate) {
    print("Failed due to low attendance.\n");
} else {
    if (final_grade >= 7.0) {
        print("Approved.\n");
    } elif (final_grade >= 5.0) {
        print("Recovery. Student needs to take a final exam.\n");
    } else {
        print("Failed by grade.\n");
    }
}
```

### `example3.cppy`: Interactive Fibonacci Sequence Generator

This program asks the user for an upper limit and then generates all Fibonacci numbers up to that value. It highlights the use of `read()` to control the behavior of a `while` loop.

```cppy
// example3.cppy
int limit;
int a = 0;
int b = 1;

print("--- Fibonacci Sequence Generator ---\n");
print("Enter the upper limit to generate Fibonacci numbers:\n");
read(limit);
print("----------------------------------\n");

while (a <= limit) {
    print(a);
    print(", ");

    int next_fib = a + b;
    a = b;
    b = next_fib;
}

print("\n----------------------------------\n");
print("Sequence generation complete.\n");
```